<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Books</title>
    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" rel="stylesheet">
    <!-- local stylesheet -->
    <link rel="stylesheet" th:href="@{/style.css}">
</head>
<body class="body_main">
<!-- Bootstrap JS -->

<script crossorigin="anonymous"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<div>


<div class="header">

    <span ; class="h1" style="color: white">Library</span>
    <!-- TODO Header goes here -->
</div>
<br>



<div>
    <table class="table_main">
        <tr>
            <th class="table-header ">Title&nbsp;</th>
            <th class="table-header ">Author&nbsp;</th>
            <th class="table-header ">Genre&nbsp;</th>
            <th class="table-header ">Available&nbsp;</th>
        </tr>
<tr class="table-divider"></tr>
        <tr th:each="u: ${books}">
            <td class="table-items" th:text="${u.title}"></td>
            <td class="table-items" th:text="${u.author}"></td>
            <td class="table-items" th:text="${u.genre}"></td>
            <td class="table-items" th:class="${u.isAvailable} ? 'yes-color' : 'no-color'"
                th:text="${u.isAvailable} ? 'yes' : 'no'"></td>
            <td class="table-items">
                <form method="post" th:action="@{/books/borrow}">
                    <input name="_method" type="hidden" value="PATCH"/>
                    <input name="bookId" th:value="${u.id}" type="hidden"/>
                    <button type="submit">Borrow</button>
                </form>
            </td>
        </tr>
    </table>

</div>

<h2>My Books</h2><br>

<table class="table_main">
    <tr>
        <th class="table-header">Title&nbsp;</th>
        <th class="table-header">Author&nbsp;</th>
        <th class="table-header">Genre&nbsp;</th>
    </tr>

    <tr th:if="${borrowedBook != null}">
        <td class="table-items" th:text="${borrowedBook.title}"></td>
        <td class="table-items" th:text="${borrowedBook.author}"></td>
        <td class="table-items" th:text="${borrowedBook.genre}"></td>
        <td class="table-items">
            <form method="post" th:action="@{/books/return}">
                <input name="_method" type="hidden" value="PATCH"/>
                <input name="bookId" th:value="${borrowedBook.id}" type="hidden"/>
                <button type="submit">Return</button>
            </form>
        </td>

    </tr>

</table>

<!-- *Logout Button -->
<form method="post" th:action="@{/userlogout}">
    <button class="button--logout" type="submit">Logout</button>
</form>

<form method="post" th:action="@{/userdelete}">
    <input name="_method" type="hidden" value="DELETE"/>
    <button class="button--logout" type="submit">Close Account</button>
</form>

</div>
</body>
</html>